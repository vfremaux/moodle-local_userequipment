{"version":3,"file":"pluginschooser.min.js","sources":["../src/pluginschooser.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// jshint unused: true, undef:true\n/* eslint no-unused-vars: 0, no-console: 0 */\n\ndefine(['jquery', 'core/log', 'core/config', 'core/str'], function($, log, cfg, str) {\n\n    var localuserequipmentplgchooser = {\n\n        strs: [],\n\n        init: function() {\n\n            var stringdefs = [\n                {key: 'noneselected', component: 'local_userequipment'}, // 0\n                {key: 'noneavailable', component: 'local_userequipment'} // 1\n            ];\n\n            str.get_strings(stringdefs).done(function(s) {\n                localuserequipmentplgchooser.strs = s;\n            });\n\n            $('#id_selectall').on('click', this.select_all);\n            $('#id_selectplugins').on('click', this.select_plugins);\n            $('#id_unselectplugins').on('click', this.unselect_plugins);\n            $('#id_unselectall').on('click', this.unselect_all);\n            log.debug(\"AMD local userequipment pluginchooser initialized\");\n        },\n\n        select_all: function(e) {\n            e.stopPropagation();\n            e.preventDefault();\n\n            var aselect = document.getElementById('id_availableplugins');\n\n            // Checking if none value.\n            if (aselect.length === 0 && aselect.item(0).value === 'ue_none') {\n                return;\n            }\n\n            // Selecting all options.\n            for (var i = 0; i < aselect.length; i++) {\n                aselect.item(i).selected = true;\n            }\n\n            localuserequipmentplgchooser.select_plugins(e);\n        },\n\n        select_plugins: function(e) {\n            e.stopPropagation();\n            e.preventDefault();\n\n            var aselect = document.getElementById('id_availableplugins');\n            var sselect = document.getElementById('id_selectedplugins');\n\n            // Moving option to the selected select.\n            localuserequipmentplgchooser.move_selected_options(aselect, sselect);\n            for (let i = 0; i < sselect.options.length; i++) {\n                sselect.options[i].selected = \"true\";\n            }\n        },\n\n        unselect_plugins: function(e) {\n            e.stopPropagation();\n            e.preventDefault();\n\n            var aselect = document.getElementById('id_availableplugins');\n            var sselect = document.getElementById('id_selectedplugins');\n\n            // Moving option to the selected select.\n            localuserequipmentplgchooser.move_selected_options(sselect, aselect);\n        },\n\n        unselect_all: function(e) {\n            e.stopPropagation();\n            e.preventDefault();\n\n            // Getting HTMLelement.\n            var sselect = document.getElementById('id_selectedplugins');\n\n            // Checking if none value.\n            if (sselect.length === 0 && sselect.item(0).value === 'ue_none') {\n                return;\n            }\n\n            // Selecting all options.\n            for (var i = 0; i < sselect.length; i++) {\n                sselect.item(i).selected = true;\n            }\n\n            localuserequipmentplgchooser.unselect_plugins(e);\n        },\n\n        move_selected_options: function(fromselect, toselect) {\n\n            // Getting HTMLelement.\n            var option;\n\n            // Moving option to the selected select.\n            for (var i = 0; i < fromselect.length; i++) {\n                if (fromselect.item(i).selected) {\n                    // Checking if none value.\n                    if (fromselect.item(i).value === 'ue_none') {\n                        continue;\n                    }\n\n                    // Checking if to is none value.\n                    if (toselect.length === 1 && toselect.item(0).value === 'ue_none') {\n                        toselect.remove(0);\n                    }\n                    // Adding option to selected.\n                    toselect.appendChild(fromselect.item(i));\n\n                    // Updating counter.\n                    i--;\n                }\n            }\n\n            // Checking if remains value.\n            if (fromselect.length === 0) {\n\n                // Adding none value.\n                option = document.createElement('option');\n                option.value = 'ue_none';\n                option.text = localuserequipmentplgchooser.strs[0];\n                fromselect.appendChild(option);\n            }\n\n            if (toselect.length === 0) {\n\n                // Adding none value.\n                option = document.createElement('option');\n                option.value = 'ue_none';\n                option.text = localuserequipmentplgchooser.strs[1];\n                toselect.appendChild(option);\n            }\n        }\n\n    };\n\n    return localuserequipmentplgchooser;\n});\n"],"names":["define","$","log","cfg","str","localuserequipmentplgchooser","strs","init","get_strings","key","component","done","s","on","this","select_all","select_plugins","unselect_plugins","unselect_all","debug","e","stopPropagation","preventDefault","aselect","document","getElementById","length","item","value","i","selected","sselect","move_selected_options","options","fromselect","toselect","option","remove","appendChild","createElement","text"],"mappings":"AAkBAA,4CAAO,CAAC,SAAU,WAAY,cAAe,aAAa,SAASC,EAAGC,IAAKC,IAAKC,SAExEC,6BAA+B,CAE/BC,KAAM,GAENC,KAAM,WAOFH,IAAII,YALa,CACb,CAACC,IAAK,eAAgBC,UAAW,uBACjC,CAACD,IAAK,gBAAiBC,UAAW,yBAGVC,MAAK,SAASC,GACtCP,6BAA6BC,KAAOM,KAGxCX,EAAE,iBAAiBY,GAAG,QAASC,KAAKC,YACpCd,EAAE,qBAAqBY,GAAG,QAASC,KAAKE,gBACxCf,EAAE,uBAAuBY,GAAG,QAASC,KAAKG,kBAC1ChB,EAAE,mBAAmBY,GAAG,QAASC,KAAKI,cACtChB,IAAIiB,MAAM,sDAGdJ,WAAY,SAASK,GACjBA,EAAEC,kBACFD,EAAEE,qBAEEC,QAAUC,SAASC,eAAe,0BAGf,IAAnBF,QAAQG,QAA0C,YAA1BH,QAAQI,KAAK,GAAGC,WAKvC,IAAIC,EAAI,EAAGA,EAAIN,QAAQG,OAAQG,IAChCN,QAAQI,KAAKE,GAAGC,UAAW,EAG/BzB,6BAA6BW,eAAeI,KAGhDJ,eAAgB,SAASI,GACrBA,EAAEC,kBACFD,EAAEE,qBAEEC,QAAUC,SAASC,eAAe,uBAClCM,QAAUP,SAASC,eAAe,sBAGtCpB,6BAA6B2B,sBAAsBT,QAASQ,aACvD,IAAIF,EAAI,EAAGA,EAAIE,QAAQE,QAAQP,OAAQG,IACxCE,QAAQE,QAAQJ,GAAGC,SAAW,QAItCb,iBAAkB,SAASG,GACvBA,EAAEC,kBACFD,EAAEE,qBAEEC,QAAUC,SAASC,eAAe,uBAClCM,QAAUP,SAASC,eAAe,sBAGtCpB,6BAA6B2B,sBAAsBD,QAASR,UAGhEL,aAAc,SAASE,GACnBA,EAAEC,kBACFD,EAAEE,qBAGES,QAAUP,SAASC,eAAe,yBAGf,IAAnBM,QAAQL,QAA0C,YAA1BK,QAAQJ,KAAK,GAAGC,WAKvC,IAAIC,EAAI,EAAGA,EAAIE,QAAQL,OAAQG,IAChCE,QAAQJ,KAAKE,GAAGC,UAAW,EAG/BzB,6BAA6BY,iBAAiBG,KAGlDY,sBAAuB,SAASE,WAAYC,kBAGpCC,OAGKP,EAAI,EAAGA,EAAIK,WAAWR,OAAQG,OAC/BK,WAAWP,KAAKE,GAAGC,SAAU,IAEI,YAA7BI,WAAWP,KAAKE,GAAGD,eAKC,IAApBO,SAAST,QAA2C,YAA3BS,SAASR,KAAK,GAAGC,OAC1CO,SAASE,OAAO,GAGpBF,SAASG,YAAYJ,WAAWP,KAAKE,IAGrCA,IAKkB,IAAtBK,WAAWR,UAGXU,OAASZ,SAASe,cAAc,WACzBX,MAAQ,UACfQ,OAAOI,KAAOnC,6BAA6BC,KAAK,GAChD4B,WAAWI,YAAYF,SAGH,IAApBD,SAAST,UAGTU,OAASZ,SAASe,cAAc,WACzBX,MAAQ,UACfQ,OAAOI,KAAOnC,6BAA6BC,KAAK,GAChD6B,SAASG,YAAYF,kBAM1B/B"}