{"version":3,"file":"bindcatpng.min.js","sources":["../src/bindcatpng.js"],"sourcesContent":["\n/*eslint-disable no-unused-vars */\n\ndefine(['jquery', 'core/config', 'core/log', 'local_userequipment/bootstrap-select'], function($, cfg, log, bootstrapselect) {\n\n    var moodlebindcatpng = {\n\n        init: function() {\n            $(\".assignment_button\").bind('click', this.load_change_form);\n            $(\"#modal-status-save\").bind('click', this.submit_change_form);\n            log.debug('AMD Userequipment CatPng initialized');\n        },\n\n        load_change_form: function() {\n            var that = $(this);\n\n            var waiter = '<div class=\"centered\"><center><img id=\"detail-waiter\" src=\"';\n            waiter += cfg.wwwroot + '/pix/i/ajaxloader.gif\" /></center></div>';\n            $('#catpng-edit-inner-form').html(waiter);\n\n            var plugintype = that.attr('data-plugintype');\n            var pluginname = that.attr('data-pluginname');\n\n            var url = cfg.wwwroot + '/local/userequipment/ajax/service.php';\n            url += '?what=getplugincategories';\n            url += '&type=' + plugintype;\n            url += '&name=' + pluginname;\n\n            $.get(url, function(data) {\n                $('#catpng-edit-inner-form').html(data);\n                $(\"#modal-status-save\").attr('data-plugintype', plugintype);\n                $(\"#modal-status-save\").attr('data-pluginname', pluginname);\n                $('.selectpicker').selectpicker();\n            }, 'html');\n        },\n\n        submit_change_form: function() {\n            var that = $(this);\n\n            var pluginname = that.attr('data-pluginname');\n            var plugintype = that.attr('data-plugintype');\n            var url = cfg.wwwroot + '/local/userequipment/ajax/service.php';\n            url += '?what=updateplugincategories';\n            url += '&name=' + pluginname;\n            url += '&type=' + plugintype;\n            var categories = $('.selectpicker').val();\n            url += '&categories=' + categories;\n            console.log(url);\n            $.get(url, function(data) {\n                if (data.result === 'success') {\n                    $('#plugin-categories-' + plugintype + '-' + pluginname).html(data.catset);\n                    $('#catpng-inner-form').modal('hide'); // Close the modal dialog.\n                }\n\n                // Update the plugin's in-form category monitor.\n\n                // Hide modal.\n                $('#catpng-inner-form').modal('hide');\n            }, 'json');\n        }\n    };\n\n    return moodlebindcatpng;\n});"],"names":["define","$","cfg","log","bootstrapselect","init","bind","this","load_change_form","submit_change_form","debug","that","waiter","wwwroot","html","plugintype","attr","pluginname","url","get","data","selectpicker","val","console","result","catset","modal"],"mappings":"AAGAA,wCAAO,CAAC,SAAU,cAAe,WAAY,yCAAyC,SAASC,EAAGC,IAAKC,IAAKC,uBAEjF,CAEnBC,KAAM,WACFJ,EAAE,sBAAsBK,KAAK,QAASC,KAAKC,kBAC3CP,EAAE,sBAAsBK,KAAK,QAASC,KAAKE,oBAC3CN,IAAIO,MAAM,yCAGdF,iBAAkB,eACVG,KAAOV,EAAEM,MAETK,OAAS,8DACbA,QAAUV,IAAIW,QAAU,2CACxBZ,EAAE,2BAA2Ba,KAAKF,YAE9BG,WAAaJ,KAAKK,KAAK,mBACvBC,WAAaN,KAAKK,KAAK,mBAEvBE,IAAMhB,IAAIW,QAAU,wCACxBK,KAAO,4BACPA,KAAO,SAAWH,WAClBG,KAAO,SAAWD,WAElBhB,EAAEkB,IAAID,KAAK,SAASE,MAChBnB,EAAE,2BAA2Ba,KAAKM,MAClCnB,EAAE,sBAAsBe,KAAK,kBAAmBD,YAChDd,EAAE,sBAAsBe,KAAK,kBAAmBC,YAChDhB,EAAE,iBAAiBoB,iBACpB,SAGPZ,mBAAoB,eACZE,KAAOV,EAAEM,MAETU,WAAaN,KAAKK,KAAK,mBACvBD,WAAaJ,KAAKK,KAAK,mBACvBE,IAAMhB,IAAIW,QAAU,wCACxBK,KAAO,+BACPA,KAAO,SAAWD,WAClBC,KAAO,SAAWH,WAElBG,KAAO,eADUjB,EAAE,iBAAiBqB,MAEpCC,QAAQpB,IAAIe,KACZjB,EAAEkB,IAAID,KAAK,SAASE,MACI,YAAhBA,KAAKI,SACLvB,EAAE,sBAAwBc,WAAa,IAAME,YAAYH,KAAKM,KAAKK,QACnExB,EAAE,sBAAsByB,MAAM,SAMlCzB,EAAE,sBAAsByB,MAAM,UAC/B"}